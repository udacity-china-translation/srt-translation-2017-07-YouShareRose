1
00:00:00,168 --> 00:00:03,388
以下是我判断 cookie 划分是否在

2
00:00:03,388 --> 00:00:04,190
我预期之内的方法

3
00:00:04,190 --> 00:00:06,610
我有个随机事件 恰好有两个结果

4
00:00:06,610 --> 00:00:10,155
一个 cookie 要么被分配到对照组 要么到实验组

5
00:00:10,155 --> 00:00:12,328
我认为这就像掷硬币般公平

6
00:00:12,328 --> 00:00:15,458
如果硬币的正面朝上 我就会把 cookie 放在对照组

7
00:00:15,458 --> 00:00:20,362
接下来我想知道的是 如果硬币的正面朝上了

8
00:00:20,362 --> 00:00:20,892
64,454 次 这是否奇怪

9
00:00:20,892 --> 00:00:22,323
这是否听起来很熟悉

10
00:00:22,323 --> 00:00:25,403
正面的次数遵循二项分布定理 所以

11
00:00:25,403 --> 00:00:28,728
我可以构建一个类似第一课中的二项式置信区间

12
00:00:28,728 --> 00:00:31,428
本次 样本总量大约是 12 万

13
00:00:31,428 --> 00:00:34,548
这对假设一个正态分布来说足够了

14
00:00:34,548 --> 00:00:35,943
以下是详细步骤

15
00:00:35,943 --> 00:00:39,601
首先 我会计算二项分布的标准差

16
00:00:39,601 --> 00:00:41,489
成功率为 0.5

17
00:00:41,489 --> 00:00:44,445
我规定它被分配到对照组

18
00:00:44,445 --> 00:00:47,436
然后我用标准差乘以置信度的 z 值

19
00:00:47,436 --> 00:00:49,945
得到误差范围

20
00:00:49,945 --> 00:00:52,903
接着我会计算一个 0.5 左右的置信区间

21
00:00:52,903 --> 00:00:54,888
如果实验设置合理

22
00:00:54,888 --> 00:00:58,112
观察到的成功率或

23
00:00:58,112 --> 00:01:01,971
对照组的 cookie 很有可能落入置信区间

24
00:01:01,971 --> 00:01:05,322
最后 我会计算观察到的成功率 或

25
00:01:05,322 --> 00:01:06,910
对照组的 cookie

26
00:01:06,910 --> 00:01:10,510
我还会检查这个值是否落入置信区间

27
00:01:10,510 --> 00:01:13,624
这和第一课中的方法略有不同

28
00:01:13,624 --> 00:01:17,558
第一课中我们计算观察到的点击概率周围的置信区间

29
00:01:17,558 --> 00:01:20,128
那个例子中 我们不知道真实的点击概率

30
00:01:20,128 --> 00:01:23,411
但这里 我知道实验是否设置合理

31
00:01:23,411 --> 00:01:25,260
真实的概率是 0.5

32
00:01:25,260 --> 00:01:27,573
所以 我可以计算置信区间

33
00:01:27,573 --> 00:01:29,174
但结果一样

34
00:01:29,174 --> 00:01:31,101
现在 我以此数据为例 操作这些步骤

35
00:01:31,101 --> 00:01:34,698
标准差是 0.0014

36
00:01:34,698 --> 00:01:39,898
置信度我按例取 95% 则 z 值是1.96

37
00:01:39,898 --> 00:01:43,315
所以误差范围是 0.0027

38
00:01:43,315 --> 00:01:49,438
这意味着置信区间为 0.4973 至 0.5027

39
00:01:49,438 --> 00:01:50,819
所以 95% 的概率

40
00:01:50,819 --> 00:01:54,833
观察到的 cookie 数量会落在该范围

41
00:01:54,833 --> 00:01:58,264
实际上 对照组中 cookie 数量

42
00:01:58,264 --> 00:02:00,462
我用 p? 来表示 是 0.5104

43
00:02:00,462 --> 00:02:03,848
很明显超过了 0.5027

44
00:02:03,848 --> 00:02:06,345
所以设置有点问题

45
00:02:06,345 --> 00:02:08,570
为了更好地查明哪里出了问题

46
00:02:08,570 --> 00:02:10,973
最好再看一遍每日数据

47
00:02:10,973 --> 00:02:14,258
检查的一个好处是可以看出是由于某天的数据异常导致该问题

48
00:02:14,258 --> 00:02:17,552
还是整体模式出了问题

49
00:02:17,552 --> 00:02:21,188
首先 我会查看对照组中的 cookie 哪几天较多

50
00:02:21,188 --> 00:02:24,771
结果显示 14 天中有 11 天 对照组的 cookie 都较多

51
00:02:24,771 --> 00:02:27,028
与实验组相比 相当高

52
00:02:27,028 --> 00:02:30,969
我也会计算对照组每天的 cookie 数量

53
00:02:30,969 --> 00:02:33,938
有几天是 0.53 甚至更高

54
00:02:33,938 --> 00:02:36,542
没有哪一天是明显最异常的

55
00:02:36,542 --> 00:02:40,622
这表明是总体模式的问题而非具体某一天的问题

56
00:02:40,622 --> 00:02:43,295
事已至此 告诉工程师

57
00:02:43,295 --> 00:02:46,085
查明实验设置是否有问题 是个不错的主意

58
00:02:46,085 --> 00:02:48,191
如果没用 你可以尝试进行分割

59
00:02:48,191 --> 00:02:50,064
比如 以国家、语言 或

60
00:02:50,064 --> 00:02:53,812
平台为标准进行分割 看是哪个部分可能造成该问题

61
00:02:53,812 --> 00:02:56,335
或者你可以查看各组中 cookie 的龄长

62
00:02:56,335 --> 00:02:59,745
看是否一组常有新 cookie 而另一组有旧 cookie

63
00:02:59,745 --> 00:03:01,293
或其他类似这样的事情

64
00:03:01,293 --> 00:03:04,253
现在假定你运行另一个实验

65
00:03:04,253 --> 00:03:06,448
这次为 7 天 以事件为分组标准

66
00:03:06,448 --> 00:03:09,303
该表显示每天对照组和

67
00:03:09,303 --> 00:03:10,768
实验组的页面浏览量

68
00:03:10,768 --> 00:03:12,881
对照组和实验组的事件总数

69
00:03:12,881 --> 00:03:14,776
是这些数字

70
00:03:14,776 --> 00:03:19,041
按 95% 的置信区间计算对照组页面浏览总量

71
00:03:19,041 --> 00:03:23,185
把范围填在这这些方框中 精确到小数点后四位

72
00:03:23,185 --> 00:03:26,151
置信区间的中心应为 0.5

73
00:03:26,151 --> 00:03:29,965
然后计算观察到的对照组页面浏览量

74
00:03:29,965 --> 00:03:31,493
将结果填在这个方框里

75
00:03:31,493 --> 00:03:33,395
同样精确到小数点后四位

76
00:03:33,395 --> 00:03:35,396
对照组和实验组之间的分布

77
00:03:35,396 --> 00:03:37,202
通过你的完整性检查了吗

78
00:03:37,202 --> 00:03:38,300
选择 是 或 否
